<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | Twitter Sentiment Analysis</title>
  <meta name="description" content="Chapter 4 Missing values | Twitter Sentiment Analysis" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | Twitter Sentiment Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | Twitter Sentiment Analysis" />
  
  
  

<meta name="author" content="Sung Jun Won(sw3049), Hyo Won (Elin) Kim(hk3175), Alex Kita(ak4729)" />


<meta name="date" content="2021-11-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation.html"/>
<link rel="next" href="results.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">TS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Twitter Sentiment Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="missing-values.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="missing-values.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-3"><a href="missing-values.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggnewscale)</span>
<span id="cb1-4"><a href="missing-values.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rtweet)</span>
<span id="cb1-5"><a href="missing-values.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjmisc)</span>
<span id="cb1-6"><a href="missing-values.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code></pre></div>
<p>Here is the missing value plot function we defined in Problem Set 4.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="missing-values.html#cb2-1" aria-hidden="true" tabindex="-1"></a>plot_missing <span class="ot">&lt;-</span> <span class="cf">function</span>(data, percent) {</span>
<span id="cb2-2"><a href="missing-values.html#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(data) <span class="ot">&lt;-</span>  <span class="fu">abbreviate</span>(<span class="fu">colnames</span>(data), <span class="at">minlength =</span> <span class="dv">3</span>)</span>
<span id="cb2-3"><a href="missing-values.html#cb2-3" aria-hidden="true" tabindex="-1"></a>    mp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">is.na</span>(data)) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="missing-values.html#cb2-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by_all</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="missing-values.html#cb2-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">count</span>(<span class="at">name =</span> <span class="st">&quot;count&quot;</span>, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="missing-values.html#cb2-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb2-7"><a href="missing-values.html#cb2-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-8"><a href="missing-values.html#cb2-8" aria-hidden="true" tabindex="-1"></a>    missing_patterns <span class="ot">&lt;-</span> mp <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mp)<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb2-9"><a href="missing-values.html#cb2-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-10"><a href="missing-values.html#cb2-10" aria-hidden="true" tabindex="-1"></a>    sorted_num_missing <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">colSums</span>(<span class="fu">is.na</span>(data)), <span class="at">decreasing =</span> <span class="cn">TRUE</span>, <span class="at">index.return=</span><span class="cn">TRUE</span>)</span>
<span id="cb2-11"><a href="missing-values.html#cb2-11" aria-hidden="true" tabindex="-1"></a>    level <span class="ot">&lt;-</span>  <span class="fu">colnames</span>(missing_patterns[sorted_num_missing<span class="sc">$</span>ix])</span>
<span id="cb2-12"><a href="missing-values.html#cb2-12" aria-hidden="true" tabindex="-1"></a>    mid <span class="ot">&lt;-</span> level[<span class="fu">ceiling</span>(<span class="fu">length</span>(level)<span class="sc">/</span><span class="dv">2</span>)] <span class="co"># get name of var located at the center of graph to put &quot;complete case&quot;</span></span>
<span id="cb2-13"><a href="missing-values.html#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="missing-values.html#cb2-14" aria-hidden="true" tabindex="-1"></a>    tidy_missing_patterns <span class="ot">&lt;-</span> </span>
<span id="cb2-15"><a href="missing-values.html#cb2-15" aria-hidden="true" tabindex="-1"></a>      missing_patterns <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="missing-values.html#cb2-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_column</span>(<span class="at">complete =</span> <span class="fu">if_else</span>(<span class="fu">rowSums</span>(missing_patterns)<span class="sc">==</span><span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="missing-values.html#cb2-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rownames_to_column</span>(<span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-18"><a href="missing-values.html#cb2-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gather</span>(key, value, <span class="fu">c</span>(<span class="sc">-</span>id,<span class="sc">-</span>complete))</span>
<span id="cb2-19"><a href="missing-values.html#cb2-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-20"><a href="missing-values.html#cb2-20" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> sorted_num_missing<span class="sc">$</span>x</span>
<span id="cb2-21"><a href="missing-values.html#cb2-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-22"><a href="missing-values.html#cb2-22" aria-hidden="true" tabindex="-1"></a>    top_count <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-23"><a href="missing-values.html#cb2-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">name=</span><span class="fu">names</span>(df) ,  </span>
<span id="cb2-24"><a href="missing-values.html#cb2-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">value=</span>df)</span>
<span id="cb2-25"><a href="missing-values.html#cb2-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-26"><a href="missing-values.html#cb2-26" aria-hidden="true" tabindex="-1"></a>    top_percent <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-27"><a href="missing-values.html#cb2-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">name=</span><span class="fu">names</span>(df) ,  </span>
<span id="cb2-28"><a href="missing-values.html#cb2-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">value=</span>df<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(data))</span>
<span id="cb2-29"><a href="missing-values.html#cb2-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-30"><a href="missing-values.html#cb2-30" aria-hidden="true" tabindex="-1"></a>    cmp <span class="ot">&lt;-</span> missing_patterns <span class="sc">%&gt;%</span></span>
<span id="cb2-31"><a href="missing-values.html#cb2-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">add_column</span>(<span class="at">complete =</span> <span class="fu">if_else</span>(<span class="fu">rowSums</span>(missing_patterns)<span class="sc">==</span><span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb2-32"><a href="missing-values.html#cb2-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-33"><a href="missing-values.html#cb2-33" aria-hidden="true" tabindex="-1"></a>    side_count <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-34"><a href="missing-values.html#cb2-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">name=</span><span class="fu">as.factor</span>(<span class="fu">seq.int</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(missing_patterns))),</span>
<span id="cb2-35"><a href="missing-values.html#cb2-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">value=</span>mp<span class="sc">$</span>count,</span>
<span id="cb2-36"><a href="missing-values.html#cb2-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">complete=</span>cmp<span class="sc">$</span>complete</span>
<span id="cb2-37"><a href="missing-values.html#cb2-37" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-38"><a href="missing-values.html#cb2-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-39"><a href="missing-values.html#cb2-39" aria-hidden="true" tabindex="-1"></a>    side_percent <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-40"><a href="missing-values.html#cb2-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">name=</span><span class="fu">as.factor</span>(<span class="fu">seq.int</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(missing_patterns))),</span>
<span id="cb2-41"><a href="missing-values.html#cb2-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">value=</span>mp<span class="sc">$</span>count<span class="sc">*</span><span class="dv">100</span><span class="sc">/</span><span class="fu">nrow</span>(data),</span>
<span id="cb2-42"><a href="missing-values.html#cb2-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">complete=</span>cmp<span class="sc">$</span>complete</span>
<span id="cb2-43"><a href="missing-values.html#cb2-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-44"><a href="missing-values.html#cb2-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-45"><a href="missing-values.html#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (percent) {</span>
<span id="cb2-46"><a href="missing-values.html#cb2-46" aria-hidden="true" tabindex="-1"></a>      p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(top_percent, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_relevel</span>(name, level), <span class="at">y=</span>value)) <span class="sc">+</span> </span>
<span id="cb2-47"><a href="missing-values.html#cb2-47" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">fill=</span><span class="st">&quot;#97b7f3&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-48"><a href="missing-values.html#cb2-48" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb2-49"><a href="missing-values.html#cb2-49" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylab</span>(<span class="st">&quot;% rows missing:&quot;</span>) <span class="sc">+</span> </span>
<span id="cb2-50"><a href="missing-values.html#cb2-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb2-51"><a href="missing-values.html#cb2-51" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggtitle</span>(<span class="st">&quot;Missing value patterns&quot;</span>)</span>
<span id="cb2-52"><a href="missing-values.html#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="missing-values.html#cb2-53" aria-hidden="true" tabindex="-1"></a>      p2 <span class="ot">&lt;-</span><span class="fu">ggplot</span>(side_percent, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_rev</span>(name), <span class="at">y=</span>value, <span class="at">fill=</span>complete)) <span class="sc">+</span> </span>
<span id="cb2-54"><a href="missing-values.html#cb2-54" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb2-55"><a href="missing-values.html#cb2-55" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_fill_manual</span>(<span class="at">values =</span>  <span class="fu">c</span>(<span class="st">&quot;#97b7f3&quot;</span>, <span class="st">&quot;#6396ec&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb2-56"><a href="missing-values.html#cb2-56" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb2-57"><a href="missing-values.html#cb2-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylab</span>(<span class="st">&quot;% row&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-58"><a href="missing-values.html#cb2-58" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb2-59"><a href="missing-values.html#cb2-59" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb2-60"><a href="missing-values.html#cb2-60" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb2-61"><a href="missing-values.html#cb2-61" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-62"><a href="missing-values.html#cb2-62" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-63"><a href="missing-values.html#cb2-63" aria-hidden="true" tabindex="-1"></a>      p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(top_count, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_relevel</span>(name, level), <span class="at">y=</span>value)) <span class="sc">+</span> </span>
<span id="cb2-64"><a href="missing-values.html#cb2-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>, <span class="at">fill=</span><span class="st">&quot;#97b7f3&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-65"><a href="missing-values.html#cb2-65" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylab</span>(<span class="st">&quot;num rows missing:&quot;</span>) <span class="sc">+</span> </span>
<span id="cb2-66"><a href="missing-values.html#cb2-66" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb2-67"><a href="missing-values.html#cb2-67" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggtitle</span>(<span class="st">&quot;Missing value patterns&quot;</span>)</span>
<span id="cb2-68"><a href="missing-values.html#cb2-68" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-69"><a href="missing-values.html#cb2-69" aria-hidden="true" tabindex="-1"></a>      p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(side_count, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_rev</span>(name), <span class="at">y=</span>value, <span class="at">fill=</span>complete)) <span class="sc">+</span> </span>
<span id="cb2-70"><a href="missing-values.html#cb2-70" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">alpha=</span><span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb2-71"><a href="missing-values.html#cb2-71" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_fill_manual</span>(<span class="at">values =</span>  <span class="fu">c</span>(<span class="st">&quot;#97b7f3&quot;</span>, <span class="st">&quot;#6396ec&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb2-72"><a href="missing-values.html#cb2-72" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb2-73"><a href="missing-values.html#cb2-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ylab</span>(<span class="st">&quot;row count&quot;</span>) <span class="sc">+</span> </span>
<span id="cb2-74"><a href="missing-values.html#cb2-74" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb2-75"><a href="missing-values.html#cb2-75" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb2-76"><a href="missing-values.html#cb2-76" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-77"><a href="missing-values.html#cb2-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-78"><a href="missing-values.html#cb2-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-79"><a href="missing-values.html#cb2-79" aria-hidden="true" tabindex="-1"></a>    tidy_missing_patterns<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="fu">as.integer</span>(tidy_missing_patterns<span class="sc">$</span>id))</span>
<span id="cb2-80"><a href="missing-values.html#cb2-80" aria-hidden="true" tabindex="-1"></a>    p3 <span class="ot">&lt;-</span><span class="fu">ggplot</span>(tidy_missing_patterns, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_relevel</span>(key, level), <span class="at">y =</span> <span class="fu">fct_rev</span>(id), <span class="at">fill =</span> value)) <span class="sc">+</span></span>
<span id="cb2-81"><a href="missing-values.html#cb2-81" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="fu">aes</span>(<span class="at">alpha=</span>complete)) <span class="sc">+</span></span>
<span id="cb2-82"><a href="missing-values.html#cb2-82" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(complete <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> key<span class="sc">==</span>mid, <span class="st">&quot;complete cases&quot;</span>, <span class="st">&quot;&quot;</span>))) <span class="sc">+</span> </span>
<span id="cb2-83"><a href="missing-values.html#cb2-83" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_fill_manual</span>(<span class="at">values =</span>  <span class="fu">c</span>(<span class="st">&quot;#b3b3b3&quot;</span>, <span class="st">&quot;#9370da&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb2-84"><a href="missing-values.html#cb2-84" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span>  <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">1.0</span>)) <span class="sc">+</span> </span>
<span id="cb2-85"><a href="missing-values.html#cb2-85" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xlab</span>(<span class="st">&quot;variable&quot;</span>) <span class="sc">+</span> </span>
<span id="cb2-86"><a href="missing-values.html#cb2-86" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ylab</span>(<span class="st">&quot;missing pattern&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-87"><a href="missing-values.html#cb2-87" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb2-88"><a href="missing-values.html#cb2-88" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb2-89"><a href="missing-values.html#cb2-89" aria-hidden="true" tabindex="-1"></a>    p1 <span class="sc">+</span> <span class="fu">plot_spacer</span>() <span class="sc">+</span> p3 <span class="sc">+</span> p2 <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="at">heights =</span> <span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&#39;cm&#39;</span>,<span class="st">&#39;null&#39;</span>)))</span>
<span id="cb2-90"><a href="missing-values.html#cb2-90" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Our dataset contains top 50 most followed twitter users. We are mainly concerned with the tweets regarding COVID-19, so we set various tags to filter out the tweets containing at least one of the tags.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="missing-values.html#cb3-1" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;BarackObama&#39;</span>, <span class="st">&#39;justinbieber&#39;</span>, <span class="st">&#39;ArianaGrande&#39;</span>, <span class="st">&#39;ladygaga&#39;</span>, <span class="st">&#39;YouTube&#39;</span>, <span class="st">&#39;KimKardashian&#39;</span>, <span class="st">&#39;elonmusk&#39;</span>, <span class="st">&#39;Twitter&#39;</span>, <span class="st">&#39;BillGates&#39;</span>, <span class="st">&#39;CNN&#39;</span>, <span class="st">&#39;ddlovato&#39;</span>, <span class="st">&#39;nytimes&#39;</span>, <span class="st">&#39;NASA&#39;</span>, <span class="st">&#39;BBCBreaking&#39;</span>, <span class="st">&#39;KylieJenner&#39;</span>, <span class="st">&#39;wizkhalifa&#39;</span>, <span class="st">&#39;LilTunechi&#39;</span>, <span class="st">&#39;NBA&#39;</span>, <span class="st">&#39;POTUS&#39;</span>, <span class="st">&#39;Pink&#39;</span>, <span class="st">&#39;JoeBiden&#39;</span>, <span class="st">&#39;NFL&#39;</span>, <span class="st">&#39;AmitShah&#39;</span>, <span class="st">&#39;WhiteHouse&#39;</span>, <span class="st">&#39;danieltosh&#39;</span>, <span class="st">&#39;AnushkaSharma&#39;</span>, <span class="st">&#39;davidguetta&#39;</span>, <span class="st">&#39;SnoopDogg&#39;</span>, <span class="st">&#39;WSJ&#39;</span>, <span class="st">&#39;KamalaHarris&#39;</span>, <span class="st">&#39;SpaceX&#39;</span>, <span class="st">&#39;VancityReynolds&#39;</span>, <span class="st">&#39;Forbes&#39;</span>, <span class="st">&#39;ABC&#39;</span>, <span class="st">&#39;RobertDowneyJr&#39;</span>, <span class="st">&#39;FLOTUS&#39;</span>, <span class="st">&#39;TheRock&#39;</span>, <span class="st">&#39;AP&#39;</span>, <span class="st">&#39;RyanSeacrest&#39;</span>, <span class="st">&#39;UN&#39;</span>, <span class="st">&#39;BigSean&#39;</span>, <span class="st">&#39;johnlegend&#39;</span>, <span class="st">&#39;netflix&#39;</span>, <span class="st">&#39;FortniteGame&#39;</span>, <span class="st">&#39;JohnCena&#39;</span>, <span class="st">&#39;cnni&#39;</span>, <span class="st">&#39;AOC&#39;</span>, <span class="st">&#39;Marvel&#39;</span>, <span class="st">&#39;enews&#39;</span>)</span>
<span id="cb3-2"><a href="missing-values.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="missing-values.html#cb3-3" aria-hidden="true" tabindex="-1"></a>tag <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;corona&#39;</span>, <span class="st">&#39;#corona&#39;</span>, <span class="st">&#39;coronavirus&#39;</span>, <span class="st">&#39;#coronavirus&#39;</span>, <span class="st">&#39;covid&#39;</span>, <span class="st">&#39;#covid&#39;</span>, <span class="st">&#39;covid19&#39;</span>, <span class="st">&#39;#covid19&#39;</span>, <span class="st">&#39;covid-19&#39;</span>, <span class="st">&#39;#covid-19&#39;</span>, <span class="st">&#39;sarscov2&#39;</span>, <span class="st">&#39;#sarscov2&#39;</span>, <span class="st">&#39;sars cov2&#39;</span>, <span class="st">&#39;sars cov 2&#39;</span>, <span class="st">&#39;covid_19&#39;</span>, <span class="st">&#39;#covid_19&#39;</span>, <span class="st">&#39;#ncov&#39;</span>, <span class="st">&#39;ncov&#39;</span>, <span class="st">&#39;#ncov2019&#39;</span>, <span class="st">&#39;ncov2019&#39;</span>, <span class="st">&#39;2019-ncov&#39;</span>, <span class="st">&#39;#2019-ncov&#39;</span>, <span class="st">&#39;pandemic&#39;</span>, <span class="st">&#39;#pandemic #2019ncov&#39;</span>, <span class="st">&#39;2019ncov&#39;</span>, <span class="st">&#39;quarantine&#39;</span>, <span class="st">&#39;#quarantine&#39;</span>, <span class="st">&#39;flatten the curve&#39;</span>, <span class="st">&#39;flattening the curve&#39;</span>, <span class="st">&#39;#flatteningthecurve&#39;</span>, <span class="st">&#39;#flattenthecurve&#39;</span>, <span class="st">&#39;hand sanitizer&#39;</span>, <span class="st">&#39;#handsanitizer&#39;</span>, <span class="st">&#39;#lockdown&#39;</span>, <span class="st">&#39;lockdown&#39;</span>, <span class="st">&#39;social distancing&#39;</span>, <span class="st">&#39;#socialdistancing&#39;</span>, <span class="st">&#39;work from home&#39;</span>, <span class="st">&#39;#workfromhome&#39;</span>, <span class="st">&#39;working from home&#39;</span>, <span class="st">&#39;#workingfromhome&#39;</span>, <span class="st">&#39;ppe&#39;</span>, <span class="st">&#39;n95&#39;</span>, <span class="st">&#39;#ppe&#39;</span>, <span class="st">&#39;#n95&#39;</span>, <span class="st">&#39;#covidiots&#39;</span>, <span class="st">&#39;covidiots&#39;</span>, <span class="st">&#39;herd immunity&#39;</span>, <span class="st">&#39;#herdimmunity&#39;</span>, <span class="st">&#39;pneumonia&#39;</span>, <span class="st">&#39;#pneumonia&#39;</span>, <span class="st">&#39;chinese virus&#39;</span>, <span class="st">&#39;#chinesevirus&#39;</span>, <span class="st">&#39;wuhan virus&#39;</span>, <span class="st">&#39;#wuhanvirus&#39;</span>, <span class="st">&#39;kung flu&#39;</span>, <span class="st">&#39;#kungflu&#39;</span>, <span class="st">&#39;wearamask&#39;</span>, <span class="st">&#39;#wearamask&#39;</span>, <span class="st">&#39;wear a mask&#39;</span>, <span class="st">&#39;vaccine&#39;</span>, <span class="st">&#39;vaccines&#39;</span>, <span class="st">&#39;#vaccine&#39;</span>, <span class="st">&#39;#vaccines&#39;</span>, <span class="st">&#39;corona vaccine&#39;</span>, <span class="st">&#39;corona vaccines&#39;</span>, <span class="st">&#39;#coronavaccine&#39;</span>, <span class="st">&#39;#coronavaccines&#39;</span>, <span class="st">&#39;face shield&#39;</span>, <span class="st">&#39;#faceshield&#39;</span>, <span class="st">&#39;face shields&#39;</span>, <span class="st">&#39;#faceshields&#39;</span>, <span class="st">&#39;health worker&#39;</span>, <span class="st">&#39;#healthworker&#39;</span>, <span class="st">&#39;health workers&#39;</span>, <span class="st">&#39;#healthworkers&#39;</span>, <span class="st">&#39;#stayhomestaysafe&#39;</span>, <span class="st">&#39;#coronaupdate&#39;</span>, <span class="st">&#39;#frontlineheroes&#39;</span>, <span class="st">&#39;#coronawarriors&#39;</span>, <span class="st">&#39;#homeschool&#39;</span>, <span class="st">&#39;#homeschooling&#39;</span>, <span class="st">&#39;#hometasking&#39;</span>, <span class="st">&#39;#masks4all&#39;</span>, <span class="st">&#39;#wfh&#39;</span>, <span class="st">&#39;wash ur hands&#39;</span>, <span class="st">&#39;wash your hands&#39;</span>, <span class="st">&#39;#washurhands&#39;</span>, <span class="st">&#39;#washyourhands&#39;</span>, <span class="st">&#39;#stayathome&#39;</span>, <span class="st">&#39;#stayhome&#39;</span>, <span class="st">&#39;#selfisolating&#39;</span>, <span class="st">&#39;self isolating&#39;</span>)</span></code></pre></div>
<p>We collected 200 most recent tweets from top 50 users and chose the tweets that have at least one of the tags in them.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="missing-values.html#cb4-1" aria-hidden="true" tabindex="-1"></a>write_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb4-2"><a href="missing-values.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (name <span class="cf">in</span> names){</span>
<span id="cb4-3"><a href="missing-values.html#cb4-3" aria-hidden="true" tabindex="-1"></a>  new <span class="ot">&lt;-</span> <span class="fu">get_timelines</span>(name, <span class="at">n=</span><span class="dv">200</span>)</span>
<span id="cb4-4"><a href="missing-values.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  write_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(new, write_df)</span>
<span id="cb4-5"><a href="missing-values.html#cb4-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-6"><a href="missing-values.html#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(write_df, <span class="st">&quot;./resources/data.csv&quot;</span>)</span></code></pre></div>
<p>Get the tweet data from the csv file.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="missing-values.html#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;./resources/data.csv&#39;</span>)</span></code></pre></div>
<p>We define the function that cleans the tweet data.
Reference: <a href="https://stackoverflow.com/questions/31348453/how-do-i-clean-twitter-data-in-r" class="uri">https://stackoverflow.com/questions/31348453/how-do-i-clean-twitter-data-in-r</a></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="missing-values.html#cb6-1" aria-hidden="true" tabindex="-1"></a>clean_tweets <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb6-2"><a href="missing-values.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="missing-values.html#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove URLs</span></span>
<span id="cb6-4"><a href="missing-values.html#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="st">&quot; ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="missing-values.html#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove mentions e.g. &quot;@my_account&quot;</span></span>
<span id="cb6-6"><a href="missing-values.html#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="st">&quot;@[[:alnum:]_]{4,}&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="missing-values.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Replace &quot;&amp;&quot; character reference with &quot;and&quot;</span></span>
<span id="cb6-8"><a href="missing-values.html#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">&quot;&amp;amp;&quot;</span>, <span class="st">&quot;and&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="missing-values.html#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove punctuation, using a standard character class</span></span>
<span id="cb6-10"><a href="missing-values.html#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="st">&quot;[[:punct:]]&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="missing-values.html#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove &quot;RT: &quot; from beginning of retweets</span></span>
<span id="cb6-12"><a href="missing-values.html#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="st">&quot;^RT:? &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="missing-values.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Replace any newline characters with a space</span></span>
<span id="cb6-14"><a href="missing-values.html#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">&quot;</span><span class="sc">\\\n</span><span class="st">&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-15"><a href="missing-values.html#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Make everything lowercase</span></span>
<span id="cb6-16"><a href="missing-values.html#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_to_lower</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-17"><a href="missing-values.html#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove any trailing whitespace around the text</span></span>
<span id="cb6-18"><a href="missing-values.html#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>(<span class="st">&quot;both&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-19"><a href="missing-values.html#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove unnecessary space</span></span>
<span id="cb6-20"><a href="missing-values.html#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">&quot;  &quot;</span>,<span class="st">&quot; &quot;</span>)</span>
<span id="cb6-21"><a href="missing-values.html#cb6-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Clean the tweet data and extract the tweets that contains COVID related tags.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="missing-values.html#cb7-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb7-2"><a href="missing-values.html#cb7-2" aria-hidden="true" tabindex="-1"></a>cleaned_text <span class="ot">&lt;-</span> <span class="fu">clean_tweets</span>(df<span class="sc">$</span>text)</span>
<span id="cb7-3"><a href="missing-values.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (words <span class="cf">in</span> <span class="fu">str_split</span>(cleaned_text, <span class="st">&quot; &quot;</span>)) {</span>
<span id="cb7-4"><a href="missing-values.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  f <span class="ot">&lt;-</span> <span class="fu">if_else</span>(<span class="fu">any</span>(words <span class="sc">%in%</span> tag), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb7-5"><a href="missing-values.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">append</span>(output, f)</span>
<span id="cb7-6"><a href="missing-values.html#cb7-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-7"><a href="missing-values.html#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="missing-values.html#cb7-8" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>output <span class="ot">&lt;-</span> output</span>
<span id="cb7-9"><a href="missing-values.html#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="missing-values.html#cb7-10" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(output <span class="sc">==</span> <span class="dv">1</span>) <span class="ot">-&gt;</span> df2</span></code></pre></div>
<p>After filtering, there are total of 403 rows (tweets).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="missing-values.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df2)</span></code></pre></div>
<pre><code>## [1] 403</code></pre>
<p>Then we checked how many missing values each column has.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="missing-values.html#cb10-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(<span class="fu">funs</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 91
##   user_id status_id created_at screen_name  text source display_text_width
##     &lt;int&gt;     &lt;int&gt;      &lt;int&gt;       &lt;int&gt; &lt;int&gt;  &lt;int&gt;              &lt;int&gt;
## 1       0         0          0           0     0      0                  0
## # ... with 84 more variables: reply_to_status_id &lt;int&gt;, reply_to_user_id &lt;int&gt;,
## #   reply_to_screen_name &lt;int&gt;, is_quote &lt;int&gt;, is_retweet &lt;int&gt;,
## #   favorite_count &lt;int&gt;, retweet_count &lt;int&gt;, quote_count &lt;int&gt;,
## #   reply_count &lt;int&gt;, hashtags &lt;int&gt;, symbols &lt;int&gt;, urls_url &lt;int&gt;,
## #   urls_t.co &lt;int&gt;, urls_expanded_url &lt;int&gt;, media_url &lt;int&gt;,
## #   media_t.co &lt;int&gt;, media_expanded_url &lt;int&gt;, media_type &lt;int&gt;,
## #   ext_media_url &lt;int&gt;, ext_media_t.co &lt;int&gt;, ...</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="missing-values.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df2, <span class="at">percent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-1.png" width="960" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="missing-values.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df2, <span class="at">percent =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-15-2.png" width="960" /></p>
<p>It is hard to draw any significant conclusion from columns that have more than 95% of entries with missing values.
Thus, we decided to remove all columns that have NA in more than 95% of entries.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="missing-values.html#cb14-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> df2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">which</span>(<span class="fu">colMeans</span>(<span class="fu">is.na</span>(.)) <span class="sc">&lt;=</span> <span class="fl">0.95</span>))</span>
<span id="cb14-2"><a href="missing-values.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="missing-values.html#cb14-3" aria-hidden="true" tabindex="-1"></a>df3</span></code></pre></div>
<pre><code>## # A tibble: 403 x 48
##      user_id status_id created_at          screen_name text              source 
##        &lt;dbl&gt;     &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;             &lt;chr&gt;  
##  1   2883841   1.46e18 2021-11-17 19:17:35 enews       &quot;#DWTS judge Der~ Social~
##  2   2883841   1.46e18 2021-11-16 21:58:32 enews       &quot;9-1-1 Star Rock~ Social~
##  3   2883841   1.46e18 2021-11-16 17:48:51 enews       &quot;Dancing With th~ Social~
##  4   2883841   1.46e18 2021-11-16 15:24:06 enews       &quot;Miles Teller Se~ Social~
##  5 138203134   1.46e18 2021-11-04 15:57:56 AOC         &quot;You can see thi~ Twitte~
##  6 138203134   1.45e18 2021-10-15 04:18:53 AOC         &quot;And by the way,~ Twitte~
##  7 138203134   1.45e18 2021-10-14 14:57:46 AOC         &quot;#Striketober co~ Twitte~
##  8 138203134   1.45e18 2021-10-13 22:40:09 AOC         &quot;Thank you all f~ Twitte~
##  9   2097571   1.46e18 2021-11-18 20:46:03 cnni        &quot;Richard Ayvazya~ Social~
## 10   2097571   1.46e18 2021-11-18 19:45:06 cnni        &quot;Winter is almos~ Social~
## # ... with 393 more rows, and 42 more variables: display_text_width &lt;dbl&gt;,
## #   reply_to_user_id &lt;dbl&gt;, reply_to_screen_name &lt;chr&gt;, is_quote &lt;lgl&gt;,
## #   is_retweet &lt;lgl&gt;, favorite_count &lt;dbl&gt;, retweet_count &lt;dbl&gt;, lang &lt;chr&gt;,
## #   retweet_status_id &lt;dbl&gt;, retweet_text &lt;chr&gt;, retweet_created_at &lt;dttm&gt;,
## #   retweet_source &lt;chr&gt;, retweet_favorite_count &lt;dbl&gt;,
## #   retweet_retweet_count &lt;dbl&gt;, retweet_user_id &lt;dbl&gt;,
## #   retweet_screen_name &lt;chr&gt;, retweet_name &lt;chr&gt;, ...</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="missing-values.html#cb16-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="sc">%&gt;%</span> <span class="fu">summarise_all</span>(<span class="fu">funs</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span></code></pre></div>
<pre><code>## # A tibble: 1 x 48
##   user_id status_id created_at screen_name  text source display_text_width
##     &lt;int&gt;     &lt;int&gt;      &lt;int&gt;       &lt;int&gt; &lt;int&gt;  &lt;int&gt;              &lt;int&gt;
## 1       0         0          0           0     0      0                  0
## # ... with 41 more variables: reply_to_user_id &lt;int&gt;,
## #   reply_to_screen_name &lt;int&gt;, is_quote &lt;int&gt;, is_retweet &lt;int&gt;,
## #   favorite_count &lt;int&gt;, retweet_count &lt;int&gt;, lang &lt;int&gt;,
## #   retweet_status_id &lt;int&gt;, retweet_text &lt;int&gt;, retweet_created_at &lt;int&gt;,
## #   retweet_source &lt;int&gt;, retweet_favorite_count &lt;int&gt;,
## #   retweet_retweet_count &lt;int&gt;, retweet_user_id &lt;int&gt;,
## #   retweet_screen_name &lt;int&gt;, retweet_name &lt;int&gt;, ...</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="missing-values.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df3, <span class="at">percent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-1.png" width="960" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="missing-values.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df3, <span class="at">percent =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-18-2.png" width="960" /></p>
<p>We can observe that columns [retweet_status_id, retweet_text, retweet_created_at, retweet_source, retweet_favorite_count, retweet_retweet_count, retweet_user_id, retweet_screen_name, retweet_name, retweet_followers_count, retweet_friends_count, retweet_statuses_count, retweet_verified] all have 365 missing values, meaning they all have correlations to each other. They have equal number of missing values and there are 365 out of 405 tweets that have those column values missing, so we can assume that most twitter users don’t retweet the tweets regarding COVID.
Also, columns [reply_to_user_id, reply_to_screen_name] have 384 values missing. These two columns are correlated to each other. Having 384 out of 405 entries missing indicates that most of the tweets regarding COVID are original posts, not replies to other posts.
Column location has 78 missing values, which is approximately 25% of the 405 total entries. It seems that majority of the tweets regarding COVID have locations indicated, but it is at users’ discretion. Moreover, column profile_background_url has 48 missing values, which is approximately 12% of 405. The low proportion of missing values indicates that most users have profile background url posted, but it is also up to users’ choice.</p>
<p>There are still many columns that are not very significant for our final project’s purpose, even some columns that have no missing values. Thus, we trimmed down the number of columns further.
Columns such as [source, display_text_width, reply_to_user_id, reply_to_screen_name, is_quote, is_retweet, retweet_status_id, retweet_text, retweet_created_at, retweet_source, retweet_favorite_count, retweet_retweet_count, retweet_user_id, retweet_screen_name, retweet_name, retweet_followers_count, retweet_friends_count, retweet_statuses_count, retweet_location, retweet_description, retweet_verified, status_url, url, protected, profile_url, profile_expanded_url, profile_banner_url, profile_background_url, profile_image_url, output] are all irrelevant or very insignificant in telling user’s activity and tweets regarding COVID, which is what we are mainly concerned with. Thus, we removed all those columns for the sake of simplicity and cleanliness.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="missing-values.html#cb20-1" aria-hidden="true" tabindex="-1"></a>cols_to_remove <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;source&#39;</span>, <span class="st">&#39;display_text_width&#39;</span>, <span class="st">&#39;reply_to_user_id&#39;</span>, <span class="st">&#39;reply_to_screen_name&#39;</span>, <span class="st">&#39;is_quote&#39;</span>, <span class="st">&#39;is_retweet&#39;</span>, <span class="st">&#39;retweet_status_id&#39;</span>, <span class="st">&#39;retweet_text&#39;</span>, <span class="st">&#39;retweet_created_at&#39;</span>, <span class="st">&#39;retweet_source&#39;</span>, <span class="st">&#39;retweet_favorite_count&#39;</span>, <span class="st">&#39;retweet_retweet_count&#39;</span>, <span class="st">&#39;retweet_user_id&#39;</span>, <span class="st">&#39;retweet_screen_name&#39;</span>, <span class="st">&#39;retweet_name&#39;</span>, <span class="st">&#39;retweet_followers_count&#39;</span>, <span class="st">&#39;retweet_friends_count&#39;</span>, <span class="st">&#39;retweet_statuses_count&#39;</span>, <span class="st">&#39;retweet_location&#39;</span>, <span class="st">&#39;retweet_description&#39;</span>, <span class="st">&#39;retweet_verified&#39;</span>, <span class="st">&#39;status_url&#39;</span>, <span class="st">&#39;url&#39;</span>, <span class="st">&#39;protected&#39;</span>, <span class="st">&#39;profile_url&#39;</span>, <span class="st">&#39;profile_expanded_url&#39;</span>, <span class="st">&#39;profile_banner_url&#39;</span>, <span class="st">&#39;profile_background_url&#39;</span>, <span class="st">&#39;profile_image_url&#39;</span>, <span class="st">&#39;output&#39;</span>)</span>
<span id="cb20-2"><a href="missing-values.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="missing-values.html#cb20-3" aria-hidden="true" tabindex="-1"></a>df4 <span class="ot">&lt;-</span> <span class="fu">select</span>(df3, <span class="sc">-</span>cols_to_remove)</span>
<span id="cb20-4"><a href="missing-values.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="missing-values.html#cb20-5" aria-hidden="true" tabindex="-1"></a>df4</span></code></pre></div>
<pre><code>## # A tibble: 403 x 18
##      user_id status_id created_at          screen_name text       favorite_count
##        &lt;dbl&gt;     &lt;dbl&gt; &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;               &lt;dbl&gt;
##  1   2883841   1.46e18 2021-11-17 19:17:35 enews       &quot;#DWTS ju~             46
##  2   2883841   1.46e18 2021-11-16 21:58:32 enews       &quot;9-1-1 St~             82
##  3   2883841   1.46e18 2021-11-16 17:48:51 enews       &quot;Dancing ~             73
##  4   2883841   1.46e18 2021-11-16 15:24:06 enews       &quot;Miles Te~             82
##  5 138203134   1.46e18 2021-11-04 15:57:56 AOC         &quot;You can ~           2123
##  6 138203134   1.45e18 2021-10-15 04:18:53 AOC         &quot;And by t~          18504
##  7 138203134   1.45e18 2021-10-14 14:57:46 AOC         &quot;#Striket~          14418
##  8 138203134   1.45e18 2021-10-13 22:40:09 AOC         &quot;Thank yo~          83780
##  9   2097571   1.46e18 2021-11-18 20:46:03 cnni        &quot;Richard ~             33
## 10   2097571   1.46e18 2021-11-18 19:45:06 cnni        &quot;Winter i~             63
## # ... with 393 more rows, and 12 more variables: retweet_count &lt;dbl&gt;,
## #   lang &lt;chr&gt;, name &lt;chr&gt;, location &lt;chr&gt;, description &lt;chr&gt;,
## #   followers_count &lt;dbl&gt;, friends_count &lt;dbl&gt;, listed_count &lt;dbl&gt;,
## #   statuses_count &lt;dbl&gt;, favourites_count &lt;dbl&gt;, account_created_at &lt;dttm&gt;,
## #   verified &lt;lgl&gt;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="missing-values.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df4, <span class="at">percent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-20-1.png" width="960" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="missing-values.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df4, <span class="at">percent =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-20-2.png" width="960" /></p>
<p>We can see that out of 18 columns, only ‘location’ column has some missing values remaining. We would have to impute the missing values or make a separate column for missing value indicator if we deem this column to be important for our future analysis. We used 200 tweets of top 50 users for creating this dataset, so the size of the dataset is small compared to what we will have for the final version of our project. When we use more tweets on more users, we may potentially have some more important observations.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/twittersentimentanalyze/twittersentiment/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/twittersentimentanalyze/twittersentiment/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
